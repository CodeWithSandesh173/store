<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev Sandesh Store | Premium Gaming Topups</title>
    <!-- Favicon -->
    <link rel="icon" href="Images/icon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Outfit:wght@700;900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/style.css">
    <!-- Firebase SDKs (Compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>

<body>

    <!-- Nav -->
    <div class="container">
        <nav>
            <a href="index.html" class="logo">
                <img src="Images/icon.png" alt="" class="nav-logo-img">
                DEV SANDESH STORE
            </a>

            <button class="mobile-menu-btn" onclick="toggleMenu()">â˜°</button>

            <div class="nav-links" id="navLinks">
                <a href="index.html">Home</a>
                <a href="#products">Products</a>
                <a href="admin.html" id="adminLink" style="display:none">Admin</a>
                <!-- If logged in show Profile/Logout, else Login -->
                <div id="authLinks">
                    <a href="login.html" class="btn btn-primary" style="padding: 8px 16px; font-size: 0.8rem;">Login</a>
                </div>
            </div>
        </nav>
    </div>

    <!-- Hero -->
    <header class="hero">
        <div class="container">
            <h1>LEVEL UP <br><span>INSTANTLY</span></h1>
            <p>Premium Top-ups, Gift Cards & Game Keys. Correct prices, fast delivery.</p>
            <a href="#products" class="btn btn-primary">Browse Shop</a>
        </div>
    </header>

    <!-- Products -->
    <section id="products" class="products-section">
        <div class="container">
            <h2 class="section-title">Trending Now</h2>
            <div class="grid" id="productGrid">
                <!-- Products injected by JS -->
            </div>
        </div>
    </section>

    <!-- CHAT WIDGET -->
    <div class="chat-widget-btn" id="chatWidget" onclick="toggleChat()">ðŸ’¬</div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <span>Support Chat</span>
            <span style="font-size:0.8rem; cursor:pointer;" onclick="toggleChat()">Close</span>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="chat-msg msg-admin">Hello! How can we help you today?</div>
        </div>
        <div class="chat-footer">
            <input type="text" id="chatInput" class="chat-input" placeholder="Type a message...">
            <button onclick="sendClientMessage()" class="btn btn-primary" style="padding: 8px 15px;">&rarr;</button>
        </div>
    </div>


    <!-- Footer -->
    <footer>
        <div class="container" style="text-align: center;">
            <p>&copy; 2026 Dev Sandesh Store. All rights reserved.</p>
            <div style="margin: 15px 0;">
                <a href="https://discord.gg/TbBqXaVsJs" target="_blank"
                    style="color: #fff; margin: 0 10px; text-decoration: none;">Join Discord</a>
                |
                <a href="https://www.instagram.com/devstorenepal/" target="_blank"
                    style="color: #fff; margin: 0 10px; text-decoration: none;">Follow on Instagram</a>
            </div>
            <p style="font-size: 0.8rem; margin-top: 10px; opacity: 0.6;">Delivery within 48 hours guaranteed or full
                refund.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/firebase-config.js"></script>
    <script src="js/data.js"></script>
    <script>
        // Simple Index Logic
        const grid = document.getElementById('productGrid');

        // Load Products
        Object.values(products).forEach(product => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.innerHTML = `
                <img src="${product.image}" alt="${product.name}" class="product-img">
                <div class="product-info">
                    <h3>${product.name}</h3>
                    <a href="product-details.html?id=${product.id}" class="btn btn-primary buy-btn">Buy Now</a>
                </div>
            `;
            grid.appendChild(card);
        });
    </script>
    <script>
        function toggleMenu() {
            const nav = document.getElementById('navLinks');
            nav.classList.toggle('active');
        }
    </script>
    <script src="js/auth.js"></script>
    <script src="js/chat.js"></script>
    <script>
        // Initialize chat listener after auth check
        auth.onAuthStateChanged((user) => {
            if (user) initClientChat();
            else {
                // If not logged in, show login prompt in chat? 
                // For now, let's just leave the 'admin' hello message.
            }
        });
    </script>
</body>

</html>